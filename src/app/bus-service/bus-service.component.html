<header>
  <div class="logo-container">
    <img [src]="getAsset('/photo/logo.png')" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo" />
  </div>
  <h2 class="title">–†–æ–∑–∫–ª–∞–¥ –∞–≤—Ç–æ–±—É—Å–Ω–∏—Ö —Ä–µ–π—Å—ñ–≤</h2>
  <div class="nav-links">
    <a routerLink="/" class="nav-link" routerLinkActive="active-link">–ì–æ–ª–æ–≤–Ω–∞</a>
  </div>
</header>
<section class="filters">
  <h2>–§—ñ–ª—å—Ç—Ä–∏</h2>
  <div class="filter-group">
    <div class="filter-item">
      <mefdev-select [(ngModel)]="filters.from" [PlaceHolder]="'–ó–≤—ñ–¥–∫–∏'" [FirstDefault]="false">
        <mefdev-option *ngFor="let destination of destinations" [Label]="destination.prettyName" [Value]="destination.name"></mefdev-option>
      </mefdev-select>      
    </div>

    <div class="filter-item">
      <mefdev-select [(ngModel)]="filters.to" [PlaceHolder]="'–ö—É–¥–∏'" [FirstDefault]="false">
        <mefdev-option *ngFor="let destination of destinations" [Label]="destination.prettyName" [Value]="destination.name"></mefdev-option>
      </mefdev-select>
    </div>

    <div class="filter-item">
      <mat-form-field appearance="fill">
        <mat-label>–î–∞—Ç–∞</mat-label>
        <input matInput [matDatepicker]="picker" [(ngModel)]="filters.date" (dateChange)="updateDiscountMessage()" placeholder="–û–±–µ—Ä—ñ—Ç—å –¥–∞—Ç—É">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </div>
    
    <div class="filter-item">
      <mat-form-field appearance="fill">
        <mat-label>–ß–∞—Å</mat-label>
        <input matInput [ngxTimepicker]="timepicker" [(ngModel)]="filters.time" (change)="updateDiscountMessage()" placeholder="–û–±–µ—Ä—ñ—Ç—å —á–∞—Å">
        <ngx-material-timepicker #timepicker></ngx-material-timepicker>
      </mat-form-field>
    </div>
    
    <div *ngIf="timeToDepartureMessage" class="time-message">
      <p>{{ timeToDepartureMessage }}</p>
    </div>
  
    <div class="filter-item">
      <mefdev-select [(ngModel)]="filters.busType" [PlaceHolder]="'–¢–∏–ø –∞–≤—Ç–æ–±—É—Å–∞'">
        <mefdev-option [Label]="'–õ—é–∫—Å'" [Value]="'luxury'"></mefdev-option>
        <mefdev-option [Label]="'–ó–≤–∏—á–∞–π–Ω–∏–π'" [Value]="'regular'"></mefdev-option>
      </mefdev-select>
    </div>

    <div class="filter-item">
      <mefdev-select [(ngModel)]="filters.sortOrder" [PlaceHolder]="'–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è'">
        <mefdev-option [Label]="'–¶—ñ–Ω–∞ –∑–∞ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è–º'" [Value]="'asc'"></mefdev-option>
        <mefdev-option [Label]="'–¶—ñ–Ω–∞ –∑–∞ —Å–ø–∞–¥–∞–Ω–Ω—è–º'" [Value]="'desc'"></mefdev-option>
      </mefdev-select>
    </div>

    <div class="filter-item">
      <button (click)="applyFilters()">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
    </div>
  </div>
</section>

<div class="selected-route-info" *ngIf="showRouteImage">
  <h3>–û–±—Ä–∞–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç: {{ filters.from }} - {{ filters.to }}</h3>
  <div *ngIf="filters.from && filters.to">
    <div class="city-images">
      <div class="city-info">
        <h4>{{ filters.from }}</h4>
        <div>
          <img [src]="getCityImage(filters.from)" alt="{{ filters.from }}" class="route-image" />
        </div>
        <p>{{ getCityDescription(filters.from) }}</p>
        <button (click)="addToCart(filters.from, getCityPrice(filters.from), getCityImage(filters.from))">–ü—Ä–∏–¥–±–∞—Ç–∏ –∫–≤–∏—Ç–æ–∫</button>
      </div>

      <div class="city-info">
        <h4>{{ filters.to }}</h4>
        <div>
          <img [src]="getCityImage(filters.to)" alt="{{ filters.to }}" class="route-image" />
        </div>
        <p>{{ getCityDescription(filters.to) }}</p>
        <button (click)="addToCart(filters.to, getCityPrice(filters.to), getCityImage(filters.to))">–ü—Ä–∏–¥–±–∞—Ç–∏ –∫–≤–∏—Ç–æ–∫</button>
      </div>
    </div>
  </div>
  <div *ngIf="isHolidayDiscountApplied()" class="discount-message">
    üéâ –°—å–æ–≥–æ–¥–Ω—ñ –¥—ñ—î –∑–Ω–∏–∂–∫–∞ {{ getHolidayDiscount() * 100 }}% –Ω–∞ –∫–≤–∏—Ç–∫–∏!
  </div>
</div>


<section class="best-offers">
  <h3>–ù–∞–π–∫—Ä–∞—â—ñ –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó</h3>
  <div class="offers">
    <div *ngFor="let bus of filteredBuses" class="offer-card">
      <div class="offer-image-container">
        <img [src]="bus.image" [alt]="bus.route" class="offer-image">
      </div>
      <div class="offer-details">
        <h4>{{ bus.route }}</h4>
        <p>–¶—ñ–Ω–∞: 
          <span *ngIf="getHolidayDiscount() > 0">
            <span class="old-price">{{ bus.price | currency:'USD' }}</span>
            {{ bus.price * (1 - getHolidayDiscount()) | currency:'USD' }}
          </span>
          <span *ngIf="getHolidayDiscount() === 0">{{ bus.price | currency:'USD' }}</span>
        </p>
        <p>{{ bus.description }}</p>
        <button class="buy-ticket" (click)="addToCart(bus.route, bus.price, bus.image)">
          –ü—Ä–∏–¥–±–∞—Ç–∏ –∫–≤–∏—Ç–æ–∫
        </button>
      </div>
    </div>
  </div>
</section>

<section>
  <h2>–ü–æ–ø—É–ª—è—Ä–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏</h2>
  <div class="destination-grid">
    <div class="destination-container" *ngFor="let destination of popularDestinations">
      <img [src]="destination.image" [alt]="destination.route" class="destination-image">
      <div class="destination-info">
        <span class="destination-name">{{ destination.route }}</span><br>
        <span class="destination-price">
          <span *ngIf="isHolidayDiscountApplied()">
            {{ destination.price * (1 - getHolidayDiscount()) | currency:'USD' }}
          </span>
        </span>
        <span *ngIf="!isHolidayDiscountApplied()">{{ destination.price | currency:'USD' }}</span>
        <button class="buy-ticket" (click)="addToCart(destination.route, destination.price, destination.image)">
          –ü—Ä–∏–¥–±–∞—Ç–∏ –∫–≤–∏—Ç–æ–∫
        </button>
      </div>
      <div class="tracking-container">
        <button class="track-button" (click)="trackRoute(destination.route, destination.departureTime)">
          –í—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ —Ä–µ–π—Å
        </button>
      </div>
    </div>
  </div>
</section>
<section class="discount-subscription">
  <h2>–û—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∏–∂–∫—É</h2>
  <form (ngSubmit)="subscribeForDiscount()" #emailForm="ngForm">
    <div class="email-input">
      <input
        type="email"
        [(ngModel)]="userEmail"
        placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à email"
        class="email-input-field"
        name="email"
        required
        #email="ngModel"
      />
      <div *ngIf="email.invalid && email.touched" class="error-message">
        –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π email.
      </div>
    </div>
    <button type="submit" class="subscribe-button" [disabled]="emailForm.invalid">
      –ü—ñ–¥–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –∑–Ω–∏–∂–∫—É
    </button>
  </form>
</section>

<section class="reviews">
  <div class="container">
    <h2>–í—ñ–¥–≥—É–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h2>
    <div class="review-cards">
      <div *ngFor="let review of reviews" class="review-card">
        <p class="review-text">"{{ review.text }}"</p>
        <p class="review-author">‚Äì {{ review.author }}</p>
        <p class="review-rating">
          <ng-container *ngFor="let star of [].constructor(review.rating)">
            ‚≠ê
          </ng-container>
        </p>
      </div>
    </div>
  </div>
</section>

<section class="map">
  <h2>–ö–∞—Ä—Ç–∞ –º–∞—Ä—à—Ä—É—Ç—ñ–≤</h2>
  <div id="map" style="height: 300px;"></div>
</section>

<div *ngIf="successMessage" class="success-message">
  {{ successMessage }}
</div>

<footer>
  <div class="footer-container">
    <div class="footer-contact">
      <h3>–ö–æ–Ω—Ç–∞–∫—Ç–∏</h3>
      <p>–¢–µ–ª–µ—Ñ–æ–Ω: +1 800 123 456</p>
      <p>Email: buscompany&#64;gmail.com</p>
    </div>
    <div class="footer-social">
      <h3>–°–ª—ñ–¥–∫—É–π—Ç–µ –∑–∞ –Ω–∞–º–∏</h3>
      <a href="https://www.instagram.com/" target="_blank">
        <img [src]="getAsset('/photo/logo.inst.png')" alt="Instagram" class="social-icon">
      </a>
      <a href="https://www.facebook.com/" target="_blank">
        <img [src]="getAsset('/photo/facebook.png')" alt="Facebook" class="social-icon">
      </a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2024 Bus Tickets. –£—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p>
  </div>
</footer>



